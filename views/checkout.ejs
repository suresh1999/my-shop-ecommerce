<% include _layouts/header.ejs %>

    <h1 class="page-title">My Cart</h1>



<br>
<% if (typeof cart !== "undefined") { %>
    <table  class="table table-striped alignmiddle">
        <tr>
            <th>Image</th>
            <th>Title</th>
            <th>Price</th>
            <th>Quantity</th>
            <th></th>
            <th>Sub total</th>
        </tr>
    <% var total = 0 %>
        <% cart.forEach(product => { %>
        <% var sub = parseFloat(product.qty * product.price).toFixed(2) %>
        <% total += +sub %>
         <tr>
            <td><img class="cpi" src="<%= product.image %>" /></td>
            <td><%= product.title %></td>
            <td><%= product.price %></td>
            <td><%= product.qty %></td>
            <td>
                <a href="/cart/update/<%= product.title %>?action=add">+</a>
                <a href="/cart/update/<%= product.title %>?action=remove">-</a>
                <a href="/cart/update/<%= product.title %>?action=clear">clear</a>
            </td>
            <td><%= sub %></td>
        </tr>
        <% }) %>
        <tr ><td colspan="6" align="right"><b>Total : <%=total %> </b></td></tr>
        <tr>
            <td colspan="5" align="right">
                <a class="clearcart btn btn-danger" href="/cart/clear">Clear Cart</a>
            </td>
            <td colspan="5" align="right">
                <a class="btn btn-primary buynow" href="#">Buy Now</a>
            </td>
        </tr>
    </table>
<% } else { %>
    <h1> Your cart is empty </h1>
<% } %>
<script>
$(function(){
    
})
</script>
<% include _layouts/footer.ejs %>
